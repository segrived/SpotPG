@using SpotPG.Utils

<MudTextField @bind-Value="Value"
               Label="@Label"
               Variant="@Variant"
               ReadOnly="@Helpers.HasEnv(EnvVariableName)"
               Class="@GetHelperClass(EnvVariableName)"
               HelperText="@GetHelperText(EnvVariableName, Label)" />

@code {
    [Parameter]
    public string Value { get; set; }

    [Parameter]
    public string Label { get; set; }

    [Parameter]
    public Variant Variant { get; set; }

    [Parameter]
    public string EnvVariableName { get; set; }

    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }

    private static string GetHelperClass(string env)
        => Helpers.HasEnv(env) ? "error-helper" : "";

    private static string GetHelperText(string env, string field)
        => Helpers.HasEnv(env) ? $"{field} was overriden with environment variable, changing this value is not available" : "";
}

<style>
    .error-helper ~ .mud-input-helper-text {
        color: var(--bs-red) !important;
    }
</style>